<%= form_for(CustomCommand.new) do |cc| %>
<%= cc.label :name %>
<%= cc.text_field :name %>
<br>
<br>
<%= cc.label :command %>
<%= cc.text_field :command %>
<br>
<%= hidden_field_tag :environment_id, @id  %>
<br>
<div id="add_params">
    <a href="javascript:void(0)" id="addmoreadditional" class="text-center"><i class="fa fa-plus" aria-hidden="true"></i> Add Parameters</a>
    <div class="input_fields_wrap_additional">
    </div>
</div>
<%= cc.submit 'Submit', :class => 'btn btn-primary' %>
<br>
<% end -%>

<br>
<br>
<% if @custom.present? %>
<h3>Existing Commands</h3>
<table>
    <thead>
        <tr>
            <th>Name</th>
            <th>Command</th>
        </tr>
    </thead>
    <tbody>
        <% @custom.map do |custom| %>
        <tr>
            <td><%= custom["name"] %></td>
            <td><%= custom["command"] %></td>
        </tr>
        <% end %>
    </tbody>
</table>
<% end %>

<script>
    jQuery(document).ready(function() {
        var max_fields = 40;
        var wrapper = jQuery(".input_fields_wrap_additional");
        var x = 1;
        jQuery("#addmoreadditional").click(function(e) {
            e.preventDefault();
            if (x < max_fields) {
                var name1 = "parameters[]";
                var name2 = "additionalkeys[]";
                var divviid = "additionaldiv" + x;
                var placeholdertext = "additional field " + x;
                jQuery(wrapper).append("<div id='" + divviid + "' class='form-group'><div class='row'><div class='col-md-3'><div class='col-md-10'><input type='text' name='" + name1 + "' class='form-control' placeholder='Parameter Value' value=''  ></div></div></div><button class='btn-danger remove_field' id='remove-additionaldiv" + x + "' onclick='removeobstr(this.id)' type='button' title='Remove'><i class='fa fa-minus-circle'></i></button></div>"); //add input box
                x++;
            }
        });

    });
</script>