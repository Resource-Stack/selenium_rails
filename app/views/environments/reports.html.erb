
<%#= button_to 'GRAPHS' %>
<%#= pie_chart User.group(:email).count %>
<%= form_with(url: '/reports', method: "get") do |f| %>
	<table >
		<thead>
			<tr>
				<th>Start Date</th>
				<th>End Date</th>
				<th></th>
			</tr>	
		</thead>
		<tbody>
			<tr>
				<td><%= f.date_field :start_date, class: 'datepicker', selected: :"#{params[:start_date]}" %>
				<%#= f.input :start_date, as: :date_picker, :input_html => { :value => "#{params[:start_date]}"} %>
 </td>
				<td><%= f.date_field :end_date, class: 'datepicker' %><%#= select_tag :default_environ, options_for_select(@environ_list) %> <%#= f.select :default_environ, @environ_list, selected: :"#{current_user.default_environ}" %></td>
				<td><%= f.submit :submit %></td>
			</tr>
		</tbody>
	</table>

<% end -%>
<%= pie_chart(@sche_status) %>
<%= pie_chart(@suite_status) %>

<h1 style="text-align: center;">Reports for <%= @e %></h1>
<div class="modal fade" id="cases" title="My modal">
  <div class="modal-header">
    
  </div>
  <div class="modal-body">
  	<button aria-hidden="true" class="close" id="health-modal-close" type="button">Ã—</button>
  	<div id="health-modal">
    
    </div>
  </div>
  <div class="modal-footer">
  </div>
</div>
<%#= column_chart User.group_by(:created_at).count %>

<form action="/run_suites" method="post">
	<input name="authenticity_token" value="<%= form_authenticity_token %>" type="hidden">
	<table id="suite-table-dude" style="width:100%">
		<thead>
			<tr>
				<th>Schedule Id</th>
				<th>TestSuite Name</th>
				<th>Status</th>
				<th>Schedule Date</th>
				<th></th>
				
			</tr>
		</thead>

		<tbody>
		<% if @schedule.present? %>
		  <% @schedule.each do |s| %>
			<tr>
				<td><%= s.id %></td>
				<% hidden_field_tag 'id', '#{s.id}' %>
				<td><%= TestSuite.find(s.test_suite_id).name %></td>
				<td><%= s.status %></td>
				<td><%= s.scheduled_date%></td>
				<td class="button-cell"><%#= link_to "List all the reports", {controller: "test_suites", action: "schedule_cases", id: s.id }, "data-toggle" => "modal", "data-target" => "#cases", class: "btn btn-default btn-sm", remote: true %>
				<%= link_to "List All Reports",list_all_reports_path(id: s.id), target: :_blank %>
				</td>
			</tr>
		  <% end %>
		<% end %>
		</tbody>
	</table>
	
</form>

<style>
table, th, td {
  border: 1px solid black;
  border-collapse: collapse;
}
</style>

<script>
	$("#suite-table-dude").dataTable({
    "iDisplayLength": 50
    });
</script>

